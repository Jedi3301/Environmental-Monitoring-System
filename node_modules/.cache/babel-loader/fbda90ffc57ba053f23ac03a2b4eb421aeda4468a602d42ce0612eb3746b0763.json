{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jedi\\\\Desktop\\\\Final Year Project\\\\weather-monitoring-frontend\\\\src\\\\AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { supabase } from './supabaseClient';\nimport EditableTable from './EditableTable';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminDashboard() {\n  _s();\n  const [roles, setRoles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [changePw, setChangePw] = useState(false);\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmNewPassword, setConfirmNewPassword] = useState('');\n  const [pwMsg, setPwMsg] = useState('');\n  const navigate = useNavigate();\n\n  // User management state\n  const [users, setUsers] = useState([]);\n  const [rolesTable, setRolesTable] = useState([]);\n  const [loadingUsers, setLoadingUsers] = useState(true);\n  const [userMsg, setUserMsg] = useState('');\n  useEffect(() => {\n    const fetchRoles = async () => {\n      setLoading(true);\n      setError(null);\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        setError('Not logged in.');\n        setLoading(false);\n        return;\n      }\n      const {\n        data,\n        error\n      } = await supabase.from('admin_roles').select('role, section').eq('user_id', user.id);\n      if (error) {\n        setError('Failed to fetch roles.');\n        setLoading(false);\n        return;\n      }\n      setRoles(data || []);\n      setLoading(false);\n    };\n    fetchRoles();\n  }, []);\n\n  // Fetch all users and their roles\n  useEffect(() => {\n    const fetchUsersAndRoles = async () => {\n      setLoadingUsers(true);\n      // Get all users\n      const {\n        data: usersData\n      } = await supabase.from('profiles').select('id, first_name, last_name');\n      // Get all roles\n      const {\n        data: rolesData\n      } = await supabase.from('admin_roles').select('*');\n      // Get emails from auth.users\n      const {\n        data: authUsers\n      } = await supabase.rpc('get_all_users_with_email'); // see note below\n      // Merge data\n      const merged = usersData.map(profile => {\n        const role = rolesData.find(r => r.user_id === profile.id);\n        const authUser = authUsers.find(u => u.id === profile.id);\n        return {\n          id: profile.id,\n          email: (authUser === null || authUser === void 0 ? void 0 : authUser.email) || '',\n          first_name: profile.first_name,\n          last_name: profile.last_name,\n          role: (role === null || role === void 0 ? void 0 : role.role) || '',\n          section: (role === null || role === void 0 ? void 0 : role.section) || '',\n          role_id: (role === null || role === void 0 ? void 0 : role.id) || null\n        };\n      });\n      setUsers(merged);\n      setRolesTable(rolesData);\n      setLoadingUsers(false);\n    };\n    fetchUsersAndRoles();\n  }, []);\n  const canEdit = tableName => {\n    if (roles.some(r => r.role === 'master_admin')) return true;\n    return roles.some(r => r.role === 'admin' && r.section === tableName);\n  };\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    navigate('/admin');\n  };\n\n  // Change password logic\n  const handleChangePassword = async e => {\n    e.preventDefault();\n    setPwMsg('');\n    if (!oldPassword || !newPassword || !confirmNewPassword) {\n      setPwMsg('Please fill in all password fields.');\n      return;\n    }\n    if (newPassword !== confirmNewPassword) {\n      setPwMsg('New passwords do not match.');\n      return;\n    }\n    // Re-authenticate user\n    const {\n      data: {\n        user\n      },\n      error: userError\n    } = await supabase.auth.getUser();\n    if (userError || !user) {\n      setPwMsg('User not found.');\n      return;\n    }\n    // Sign in with old password to verify\n    const {\n      error: signInError\n    } = await supabase.auth.signInWithPassword({\n      email: user.email,\n      password: oldPassword\n    });\n    if (signInError) {\n      setPwMsg('Old password is incorrect.');\n      return;\n    }\n    // Update password\n    const {\n      error: updateError\n    } = await supabase.auth.updateUser({\n      password: newPassword\n    });\n    if (updateError) {\n      setPwMsg('Failed to update password.');\n      return;\n    }\n    setPwMsg('Password updated successfully!');\n    setOldPassword('');\n    setNewPassword('');\n    setConfirmNewPassword('');\n    setChangePw(false);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 12\n    }, this);\n  }\n  if (!roles.length) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: '#888'\n      },\n      children: \"You do not have admin access.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: '100vh',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      background: 'linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%)',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLogout,\n      style: {\n        position: 'absolute',\n        top: 24,\n        right: 32,\n        background: '#1976d2',\n        color: '#fff',\n        border: 'none',\n        borderRadius: 6,\n        padding: '8px 18px',\n        fontWeight: 600,\n        cursor: 'pointer',\n        boxShadow: '0 2px 8px rgba(25, 118, 210, 0.08)'\n      },\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: 24,\n        left: 32\n      },\n      children: !changePw ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setChangePw(true),\n        style: {\n          background: '#fff',\n          color: '#1976d2',\n          border: '1.5px solid #1976d2',\n          borderRadius: 6,\n          padding: '8px 18px',\n          fontWeight: 600,\n          cursor: 'pointer',\n          boxShadow: '0 2px 8px rgba(25, 118, 210, 0.08)'\n        },\n        children: \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleChangePassword,\n        style: {\n          background: '#fff',\n          border: '1.5px solid #1976d2',\n          borderRadius: 8,\n          padding: 16,\n          boxShadow: '0 2px 8px rgba(25, 118, 210, 0.08)',\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 8,\n          minWidth: 260\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontWeight: 600,\n            color: '#1976d2'\n          },\n          children: \"Old Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: oldPassword,\n          onChange: e => setOldPassword(e.target.value),\n          style: {\n            padding: 8,\n            borderRadius: 6,\n            border: '1.5px solid #e0e7ff'\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontWeight: 600,\n            color: '#1976d2'\n          },\n          children: \"New Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: newPassword,\n          onChange: e => setNewPassword(e.target.value),\n          style: {\n            padding: 8,\n            borderRadius: 6,\n            border: '1.5px solid #e0e7ff'\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontWeight: 600,\n            color: '#1976d2'\n          },\n          children: \"Confirm New Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: confirmNewPassword,\n          onChange: e => setConfirmNewPassword(e.target.value),\n          style: {\n            padding: 8,\n            borderRadius: 6,\n            border: '1.5px solid #e0e7ff'\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 8,\n            marginTop: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            style: {\n              background: '#1976d2',\n              color: '#fff',\n              border: 'none',\n              borderRadius: 6,\n              padding: '8px 18px',\n              fontWeight: 600,\n              cursor: 'pointer'\n            },\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => {\n              setChangePw(false);\n              setPwMsg('');\n              setOldPassword('');\n              setNewPassword('');\n              setConfirmNewPassword('');\n            },\n            style: {\n              background: '#eee',\n              color: '#1976d2',\n              border: 'none',\n              borderRadius: 6,\n              padding: '8px 18px',\n              fontWeight: 600,\n              cursor: 'pointer'\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this), pwMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: pwMsg.includes('success') ? 'green' : 'red',\n            marginTop: 4\n          },\n          children: pwMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        fontSize: '2.5rem',\n        fontWeight: 800,\n        color: '#1a237e',\n        marginBottom: 24,\n        textShadow: '0 2px 8px rgba(0,0,0,0.08)'\n      },\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'rgba(255,255,255,0.85)',\n        borderRadius: 20,\n        boxShadow: '0 8px 32px 0 rgba(99,102,241,0.13)',\n        padding: 32,\n        minWidth: 320,\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          color: '#1976d2',\n          fontWeight: 700,\n          marginBottom: 16\n        },\n        children: \"Edit Environmental Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), canEdit('air_quality') && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 32\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Air Quality Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(EditableTable, {\n          tableName: \"air_quality\",\n          columns: [\"id\", \"pm2_5\", \"pm10\", \"co2\", \"aqi\", \"recorded_at\"],\n          canEdit: canEdit('air_quality')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this), canEdit('water_quality') && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 32\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Water Quality Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(EditableTable, {\n          tableName: \"water_quality\",\n          columns: [\"id\", \"ph\", \"turbidity\", \"dissolved_oxygen\", \"recorded_at\"],\n          canEdit: canEdit('water_quality')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this), canEdit('weather_forecast') && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 32\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Weather Forecast Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(EditableTable, {\n          tableName: \"weather_forecast\",\n          columns: [\"id\", \"temperature\", \"humidity\", \"wind_speed\", \"forecast_time\"],\n          canEdit: canEdit('weather_forecast')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this), !canEdit('air_quality') && !canEdit('water_quality') && !canEdit('weather_forecast') && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#888'\n        },\n        children: \"You do not have permission to edit any data.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), roles.some(r => r.role === 'master_admin') && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 32,\n        width: '100%',\n        maxWidth: 900\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Manage User Roles\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this), loadingUsers ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading users...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        style: {\n          width: '100%',\n          borderCollapse: 'collapse',\n          fontSize: '0.95rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"First Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Last Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Role\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Section\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: users.map(user => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.first_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.last_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 21\n            }, this)]\n          }, user.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }, this), userMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: userMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminDashboard, \"cYzXi6jrz0Cg0Enhb0Jxp0wGy88=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useEffect","useState","supabase","EditableTable","useNavigate","jsxDEV","_jsxDEV","AdminDashboard","_s","roles","setRoles","loading","setLoading","error","setError","changePw","setChangePw","oldPassword","setOldPassword","newPassword","setNewPassword","confirmNewPassword","setConfirmNewPassword","pwMsg","setPwMsg","navigate","users","setUsers","rolesTable","setRolesTable","loadingUsers","setLoadingUsers","userMsg","setUserMsg","fetchRoles","data","user","auth","getUser","from","select","eq","id","fetchUsersAndRoles","usersData","rolesData","authUsers","rpc","merged","map","profile","role","find","r","user_id","authUser","u","email","first_name","last_name","section","role_id","canEdit","tableName","some","handleLogout","signOut","handleChangePassword","e","preventDefault","userError","signInError","signInWithPassword","password","updateError","updateUser","style","minHeight","display","alignItems","justifyContent","children","fileName","_jsxFileName","lineNumber","columnNumber","color","length","flexDirection","background","position","onClick","top","right","border","borderRadius","padding","fontWeight","cursor","boxShadow","left","onSubmit","gap","minWidth","type","value","onChange","target","required","marginTop","includes","fontSize","marginBottom","textShadow","textAlign","columns","width","maxWidth","borderCollapse","_c","$RefreshReg$"],"sources":["C:/Users/Jedi/Desktop/Final Year Project/weather-monitoring-frontend/src/AdminDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { supabase } from './supabaseClient';\nimport EditableTable from './EditableTable';\nimport { useNavigate } from 'react-router-dom';\n\nfunction AdminDashboard() {\n  const [roles, setRoles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [changePw, setChangePw] = useState(false);\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmNewPassword, setConfirmNewPassword] = useState('');\n  const [pwMsg, setPwMsg] = useState('');\n  const navigate = useNavigate();\n\n  // User management state\n  const [users, setUsers] = useState([]);\n  const [rolesTable, setRolesTable] = useState([]);\n  const [loadingUsers, setLoadingUsers] = useState(true);\n  const [userMsg, setUserMsg] = useState('');\n\n  useEffect(() => {\n    const fetchRoles = async () => {\n      setLoading(true);\n      setError(null);\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        setError('Not logged in.');\n        setLoading(false);\n        return;\n      }\n      const { data, error } = await supabase\n        .from('admin_roles')\n        .select('role, section')\n        .eq('user_id', user.id);\n      if (error) {\n        setError('Failed to fetch roles.');\n        setLoading(false);\n        return;\n      }\n      setRoles(data || []);\n      setLoading(false);\n    };\n    fetchRoles();\n  }, []);\n\n  // Fetch all users and their roles\n  useEffect(() => {\n    const fetchUsersAndRoles = async () => {\n      setLoadingUsers(true);\n      // Get all users\n      const { data: usersData } = await supabase.from('profiles').select('id, first_name, last_name');\n      // Get all roles\n      const { data: rolesData } = await supabase.from('admin_roles').select('*');\n      // Get emails from auth.users\n      const { data: authUsers } = await supabase.rpc('get_all_users_with_email'); // see note below\n      // Merge data\n      const merged = usersData.map(profile => {\n        const role = rolesData.find(r => r.user_id === profile.id);\n        const authUser = authUsers.find(u => u.id === profile.id);\n        return {\n          id: profile.id,\n          email: authUser?.email || '',\n          first_name: profile.first_name,\n          last_name: profile.last_name,\n          role: role?.role || '',\n          section: role?.section || '',\n          role_id: role?.id || null,\n        };\n      });\n      setUsers(merged);\n      setRolesTable(rolesData);\n      setLoadingUsers(false);\n    };\n    fetchUsersAndRoles();\n  }, []);\n\n  const canEdit = tableName => {\n    if (roles.some(r => r.role === 'master_admin')) return true;\n    return roles.some(r => r.role === 'admin' && r.section === tableName);\n  };\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    navigate('/admin');\n  };\n\n  // Change password logic\n  const handleChangePassword = async (e) => {\n    e.preventDefault();\n    setPwMsg('');\n    if (!oldPassword || !newPassword || !confirmNewPassword) {\n      setPwMsg('Please fill in all password fields.');\n      return;\n    }\n    if (newPassword !== confirmNewPassword) {\n      setPwMsg('New passwords do not match.');\n      return;\n    }\n    // Re-authenticate user\n    const { data: { user }, error: userError } = await supabase.auth.getUser();\n    if (userError || !user) {\n      setPwMsg('User not found.');\n      return;\n    }\n    // Sign in with old password to verify\n    const { error: signInError } = await supabase.auth.signInWithPassword({ email: user.email, password: oldPassword });\n    if (signInError) {\n      setPwMsg('Old password is incorrect.');\n      return;\n    }\n    // Update password\n    const { error: updateError } = await supabase.auth.updateUser({ password: newPassword });\n    if (updateError) {\n      setPwMsg('Failed to update password.');\n      return;\n    }\n    setPwMsg('Password updated successfully!');\n    setOldPassword('');\n    setNewPassword('');\n    setConfirmNewPassword('');\n    setChangePw(false);\n  };\n\n  if (loading) {\n    return <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>Loading...</div>;\n  }\n  if (error) {\n    return <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', color: 'red' }}>{error}</div>;\n  }\n  if (!roles.length) {\n    return <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#888' }}>You do not have admin access.</div>;\n  }\n\n  return (\n    <div style={{ minHeight: '100vh', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', background: 'linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%)', position: 'relative' }}>\n      <button onClick={handleLogout} style={{ position: 'absolute', top: 24, right: 32, background: '#1976d2', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer', boxShadow: '0 2px 8px rgba(25, 118, 210, 0.08)' }}>\n        Logout\n      </button>\n      {/* Change Password Section */}\n      <div style={{ position: 'absolute', top: 24, left: 32 }}>\n        {!changePw ? (\n          <button onClick={() => setChangePw(true)} style={{ background: '#fff', color: '#1976d2', border: '1.5px solid #1976d2', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer', boxShadow: '0 2px 8px rgba(25, 118, 210, 0.08)' }}>\n            Change Password\n          </button>\n        ) : (\n          <form onSubmit={handleChangePassword} style={{ background: '#fff', border: '1.5px solid #1976d2', borderRadius: 8, padding: 16, boxShadow: '0 2px 8px rgba(25, 118, 210, 0.08)', display: 'flex', flexDirection: 'column', gap: 8, minWidth: 260 }}>\n            <label style={{ fontWeight: 600, color: '#1976d2' }}>Old Password</label>\n            <input type=\"password\" value={oldPassword} onChange={e => setOldPassword(e.target.value)} style={{ padding: 8, borderRadius: 6, border: '1.5px solid #e0e7ff' }} required />\n            <label style={{ fontWeight: 600, color: '#1976d2' }}>New Password</label>\n            <input type=\"password\" value={newPassword} onChange={e => setNewPassword(e.target.value)} style={{ padding: 8, borderRadius: 6, border: '1.5px solid #e0e7ff' }} required />\n            <label style={{ fontWeight: 600, color: '#1976d2' }}>Confirm New Password</label>\n            <input type=\"password\" value={confirmNewPassword} onChange={e => setConfirmNewPassword(e.target.value)} style={{ padding: 8, borderRadius: 6, border: '1.5px solid #e0e7ff' }} required />\n            <div style={{ display: 'flex', gap: 8, marginTop: 8 }}>\n              <button type=\"submit\" style={{ background: '#1976d2', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer' }}>Update</button>\n              <button type=\"button\" onClick={() => { setChangePw(false); setPwMsg(''); setOldPassword(''); setNewPassword(''); setConfirmNewPassword(''); }} style={{ background: '#eee', color: '#1976d2', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, cursor: 'pointer' }}>Cancel</button>\n            </div>\n            {pwMsg && <div style={{ color: pwMsg.includes('success') ? 'green' : 'red', marginTop: 4 }}>{pwMsg}</div>}\n          </form>\n        )}\n      </div>\n      <h1 style={{ fontSize: '2.5rem', fontWeight: 800, color: '#1a237e', marginBottom: 24, textShadow: '0 2px 8px rgba(0,0,0,0.08)' }}>\n        Admin Dashboard\n      </h1>\n      <div style={{ background: 'rgba(255,255,255,0.85)', borderRadius: 20, boxShadow: '0 8px 32px 0 rgba(99,102,241,0.13)', padding: 32, minWidth: 320, textAlign: 'center' }}>\n        <h2 style={{ color: '#1976d2', fontWeight: 700, marginBottom: 16 }}>Edit Environmental Data</h2>\n        {canEdit('air_quality') && (\n          <div style={{ marginBottom: 32 }}>\n            <h3>Air Quality Data</h3>\n            <EditableTable\n              tableName=\"air_quality\"\n              columns={[\"id\", \"pm2_5\", \"pm10\", \"co2\", \"aqi\", \"recorded_at\"]}\n              canEdit={canEdit('air_quality')}\n            />\n          </div>\n        )}\n        {canEdit('water_quality') && (\n          <div style={{ marginBottom: 32 }}>\n            <h3>Water Quality Data</h3>\n            <EditableTable\n              tableName=\"water_quality\"\n              columns={[\"id\", \"ph\", \"turbidity\", \"dissolved_oxygen\", \"recorded_at\"]}\n              canEdit={canEdit('water_quality')}\n            />\n          </div>\n        )}\n        {canEdit('weather_forecast') && (\n          <div style={{ marginBottom: 32 }}>\n            <h3>Weather Forecast Data</h3>\n            <EditableTable\n              tableName=\"weather_forecast\"\n              columns={[\"id\", \"temperature\", \"humidity\", \"wind_speed\", \"forecast_time\"]}\n              canEdit={canEdit('weather_forecast')}\n            />\n          </div>\n        )}\n        {!canEdit('air_quality') && !canEdit('water_quality') && !canEdit('weather_forecast') && (\n          <div style={{ color: '#888' }}>You do not have permission to edit any data.</div>\n        )}\n      </div>\n      {roles.some(r => r.role === 'master_admin') && (\n        <div style={{ marginTop: 32, width: '100%', maxWidth: 900 }}>\n          <h2>Manage User Roles</h2>\n          {loadingUsers ? (\n            <div>Loading users...</div>\n          ) : (\n            <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '0.95rem' }}>\n              <thead>\n                <tr>\n                  <th>Email</th>\n                  <th>First Name</th>\n                  <th>Last Name</th>\n                  <th>Role</th>\n                  <th>Section</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {users.map(user => (\n                  <tr key={user.id}>\n                    <td>{user.email}</td>\n                    <td>{user.first_name}</td>\n                    <td>{user.last_name}</td>\n                    <td>\n                      {/* Dropdown for role */}\n                    </td>\n                    <td>\n                      {/* Dropdown or input for section */}\n                    </td>\n                    <td>\n                      {/* Add/Edit/Remove buttons */}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          )}\n          {userMsg && <div>{userMsg}</div>}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AdminDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}